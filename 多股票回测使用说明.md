# 多股票回测优化器使用说明

## 概述
本程序支持输入多个股票代码，为每个股票代码新开一个本地终端窗口并执行回测优化命令。支持两种使用模式：命令行模式和交互模式。

## 使用方法

### 方法1：命令行模式（推荐批量处理）
```bash
# 基本用法：传入逗号分隔的股票代码列表
python multi_stock_backtest.py --symbol 300236,688256,300870,000776,600900

# 自定义开始和结束日期
python multi_stock_backtest.py --symbol 300236,688256 --start 2023-06-01 --end 2024-01-15

# 只指定开始日期，结束日期默认为今天
python multi_stock_backtest.py --symbol 300236,688256 --start 2023-06-01
```

### 方法2：交互模式
```bash
python multi_stock_backtest.py
```

## 命令行参数说明

| 参数 | 说明 | 是否必需 | 默认值 | 示例 |
|------|------|----------|--------|------|
| `--symbol` | 股票代码列表，用逗号分隔 | 否 | 无 | `300236,688256,300870` |
| `--start` | 回测开始日期 | 否 | `2023-01-01` | `2023-06-01` |
| `--end` | 回测结束日期 | 否 | 当前日期 | `2024-01-15` |

## 操作步骤

### 命令行模式
1. **直接执行**：使用 `--symbol` 参数传入股票代码列表
2. **自动执行**：程序会为每个股票代码新开一个终端窗口，并自动执行回测优化命令

### 交互模式
1. **运行程序**：不带参数启动程序
2. **输入股票代码**：
   - 可以输入单个股票代码，如：`000001`
   - 可以输入多个股票代码，用空格分隔，如：`000001 000002 000858`
3. **确认执行**：程序会显示将要处理的股票代码列表，输入 `y` 确认执行
4. **自动执行**：程序会为每个股票代码新开一个终端窗口，并自动执行回测优化命令

## 回测参数说明

程序会自动设置以下参数：
- **开始日期**：可通过 `--start` 参数指定，默认为 `2023-01-01`
- **结束日期**：可通过 `--end` 参数指定，默认为当前日期
- **策略**：1
- **最小阈值**：0.1
- **最大阈值**：2
- **步长**：0.1
- **数据源**：baostock

## 命令示例

### 命令行模式示例
```bash
# 批量处理多个股票
python multi_stock_backtest.py --symbol 300236,688256,300870,000776,600900,301012,600089,688008,603977,300972

# 自定义时间范围
python multi_stock_backtest.py --symbol 300236,688256 --start 2023-06-01 --end 2024-01-15
```

### 每个股票代码会在新终端窗口中执行类似这样的命令：
```bash
cd ../backtrade && python backtest_optimizer.py --symbol 300236 --start 2023-01-01 --end 2024-01-15 --use-baostock --strategy 1 --min-threshold 0.1 --max-threshold 2 --step 0.1
```

## 注意事项

1. **依赖要求**：确保 `backtest_optimizer.py` 文件存在于 `../backtrade/` 目录（相对于程序所在目录）
2. **Python环境**：确保Python环境已正确配置
3. **终端应用**：程序会自动使用系统默认的终端应用
4. **股票代码格式**：命令行模式下使用逗号分隔，交互模式下使用空格分隔
5. **工作目录**：程序会自动切换到正确的目录执行回测命令
6. **目录结构**：程序假设 `backtrade` 目录与 `ChoseOneAgent` 目录在同一级目录中

## 退出程序

### 命令行模式
- 执行完成后自动退出

### 交互模式
在程序运行过程中，输入以下任一命令可以退出：
- `quit`
- `exit`
- `q`
